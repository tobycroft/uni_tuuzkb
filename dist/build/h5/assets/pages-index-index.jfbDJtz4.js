import{g as e,c as s,a as t,w as n,i as o,o as a,b as l,d as i,t as d,n as c,e as u,f as p,h as f,j as r}from"./index-DuJP44h2.js";import{_}from"./_plugin-vue_export-helper.BCo6x5W8.js";const h=_({data:()=>({size:22,connectionMessage:"未连接",Endpoint_BeforeDelay:0,Endpoint_delay:0,Endpoint_dynamic_mode:0,LCD1:"",LCD2:"",connectionClass:"status-failed",Mode:0,socket:null}),mounted(){const s=e("config_ip"),t=e("config_port");s&&t&&this.connectWebSocket(`ws://${s}:${t}`)},methods:{onSliderChange(e,s){this[e]!==s.detail.value&&(this[e]=s.detail.value,console.log(`${e} value:`,s.detail.value),this.socket.send({data:JSON.stringify({route:"semi-config",type:e,data:this.$data})}))},connectWebSocket(e){this.socket=s({url:e,success:()=>{this.connectionMessage="连接成功✔",this.connectionClass="status-success"},fail:()=>{this.connectionMessage="连接失败×",this.connectionClass="status-failed"}}),this.socket.onOpen((()=>{this.connectionMessage="连接建立",this.connectionClass="status-success",this.updateData()})),this.socket.onError((()=>{this.connectionMessage="连接错误",this.connectionClass="status-failed"})),this.socket.onMessage((e=>{if("update"===e.data)this.updateData();else{const s=JSON.parse(e.data);this.updateFormData(s)}})),this.socket.onClose((()=>{this.connectionMessage="连接被关闭",this.connectionClass="status-failed"}))},updateData(){this.socket.send({data:JSON.stringify({route:"info"})})},updateFormData(e){console.log(e);for(const s in e)null!==this[s]&&(this[s]=e[s])},modeOption(e){this.Mode=e,this.socket.send({data:JSON.stringify({route:"semi-config",type:"Mode",data:this.$data})})},endPointOption(e){this.Endpoint_dynamic_mode=e,this.socket.send({data:JSON.stringify({route:"semi-config",type:"Endpoint_dynamic_mode",data:this.$data})})},getEndpointClass(e){return this.Endpoint_dynamic_mode===e?"option-selected":"option"},getModeClass(e){return this.Mode===e?"option-selected":"option"}}},[["render",function(e,s,_,h,g,C){const m=o,k=u,y=p,E=f,O=r;return a(),t(m,{class:"container"},{default:n((()=>[l(m,{class:c([g.connectionClass,"connection-status"])},{default:n((()=>[i(d(g.connectionMessage),1)])),_:1},8,["class"]),l(O,{class:"form"},{default:n((()=>[l(m,{class:"form-group"},{default:n((()=>[l(m,null,{default:n((()=>[i("进度条:")])),_:1}),l(m,null,{default:n((()=>[i("Endpoint_BeforeDelay:"+d(g.Endpoint_BeforeDelay),1)])),_:1}),l(m,null,{default:n((()=>[i("Endpoint_delay:"+d(g.Endpoint_delay),1)])),_:1}),l(m,null,{default:n((()=>[i("Endpoint_dynamic_mode:"+d(g.Endpoint_dynamic_mode),1)])),_:1}),l(m,null,{default:n((()=>[i("LCD1:"+d(g.LCD1),1)])),_:1}),l(m,null,{default:n((()=>[i("LCD2:"+d(g.LCD2),1)])),_:1})])),_:1}),l(m,{class:"slider-label"},{default:n((()=>[i("前置时间: "+d(g.Endpoint_BeforeDelay),1)])),_:1}),l(k,{value:g.Endpoint_BeforeDelay,min:"0",max:"200",step:"1","show-value":"",activeColor:"#3cc51f",backgroundColor:"#e5e5e5","block-color":"#3cc51f","block-size":"28",onChange:s[0]||(s[0]=e=>C.onSliderChange("Endpoint_BeforeDelay",e))},null,8,["value"]),l(m,{class:"slider-label"},{default:n((()=>[i("间隔时间: "+d(g.Endpoint_delay),1)])),_:1}),l(k,{value:g.Endpoint_delay,min:"0",max:"200",step:"1","show-value":"",activeColor:"#3cc51f",backgroundColor:"#e5e5e5","block-color":"#3cc51f","block-size":"28",onChange:s[1]||(s[1]=e=>C.onSliderChange("Endpoint_delay",e))},null,8,["value"]),l(m,{class:"form-group"},{default:n((()=>[l(y,null,{default:n((()=>[i("选项选择:")])),_:1}),l(m,{class:"radio-group"},{default:n((()=>[l(E,{onClick:s[2]||(s[2]=e=>C.modeOption(0)),class:c(C.getModeClass(0))},{default:n((()=>[i("关闭")])),_:1},8,["class"]),l(E,{onClick:s[3]||(s[3]=e=>C.modeOption(1)),class:c(C.getModeClass(1))},{default:n((()=>[i("On-Q")])),_:1},8,["class"]),l(E,{onClick:s[4]||(s[4]=e=>C.modeOption(2)),class:c(C.getModeClass(2))},{default:n((()=>[i("On-Whel")])),_:1},8,["class"])])),_:1})])),_:1}),l(m,{class:"form-group"},{default:n((()=>[l(y,null,{default:n((()=>[i("选项选择:")])),_:1}),l(m,{class:"radio-group"},{default:n((()=>[l(E,{onClick:s[5]||(s[5]=e=>C.endPointOption(0)),class:c(C.getEndpointClass(0))},{default:n((()=>[i("Ste")])),_:1},8,["class"]),l(E,{onClick:s[6]||(s[6]=e=>C.endPointOption(1)),class:c(C.getEndpointClass(1))},{default:n((()=>[i("Dym")])),_:1},8,["class"]),l(E,{onClick:s[7]||(s[7]=e=>C.endPointOption(2)),class:c(C.getEndpointClass(2))},{default:n((()=>[i("Wde")])),_:1},8,["class"]),l(E,{onClick:s[8]||(s[8]=e=>C.endPointOption(3)),class:c(C.getEndpointClass(3))},{default:n((()=>[i("Ato")])),_:1},8,["class"]),l(E,{onClick:s[9]||(s[9]=e=>C.endPointOption(4)),class:c(C.getEndpointClass(4))},{default:n((()=>[i("Atw")])),_:1},8,["class"]),l(E,{onClick:s[10]||(s[10]=e=>C.endPointOption(5)),class:c(C.getEndpointClass(5))},{default:n((()=>[i("Man")])),_:1},8,["class"])])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-30574a80"]]);export{h as default};
