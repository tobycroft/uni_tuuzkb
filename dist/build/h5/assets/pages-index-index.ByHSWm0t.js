import{g as t,c as e,a as s,w as n,i as o,o as a,b as l,d as c,t as i,n as d,e as u,f,h as r,j as p}from"./index-CyrkyxwI.js";import{_}from"./_plugin-vue_export-helper.BCo6x5W8.js";const g=_({data:()=>({size:22,connectionMessage:"未连接",Endpoint_BeforeDelay:0,Endpoint_delay:0,Endpoint_dynamic_mode:0,LCD1:"",LCD2:"",connectionClass:"status-failed",Mode:0,socket:null}),mounted(){this.reconnect()},methods:{reconnect(){const e=t("config_ip"),s=t("config_port");e&&s&&this.connectWebSocket(`ws://${e}:${s}`)},cmdFunc(t){const e={route:"kbd",type:t};this.socket.send({data:JSON.stringify(e)})},onSliderChange(t,e){this[t]!==e.detail.value&&(this[t]=e.detail.value,console.log(`${t} value:`,e.detail.value),this.socket.send({data:JSON.stringify({route:"semi-config",type:t,data:this.$data})}))},connectWebSocket(t){this.socket=e({url:t,success:()=>{this.connectionMessage="连接成功✔",this.connectionClass="status-success"},fail:()=>{this.connectionMessage="连接失败×",this.connectionClass="status-failed"}}),this.socket.onOpen((()=>{this.connectionMessage="连接建立",this.connectionClass="status-success",this.updateData()})),this.socket.onError((()=>{this.connectionMessage="连接错误",this.connectionClass="status-failed"})),this.socket.onMessage((t=>{if("update"===t.data)this.updateData();else{const e=JSON.parse(t.data);this.updateFormData(e)}})),this.socket.onClose((()=>{this.connectionMessage="连接被关闭",this.connectionClass="status-failed"}))},updateData(){this.socket.send({data:JSON.stringify({route:"info"})})},updateFormData(t){console.log(t);for(const e in t)null!==this[e]&&(this[e]=t[e])},modeOption(t){this.Mode=t,this.socket.send({data:JSON.stringify({route:"semi-config",type:"Mode",data:this.$data})})},endPointOption(t){this.Endpoint_dynamic_mode=t,this.socket.send({data:JSON.stringify({route:"semi-config",type:"Endpoint_dynamic_mode",data:this.$data})})},getEndpointClass(t){return this.Endpoint_dynamic_mode===t?"option-selected":"option"},getModeClass(t){return this.Mode===t?"option-selected":"option"}}},[["render",function(t,e,_,g,C,h){const m=o,k=u,y=f,E=r,O=p;return a(),s(m,{class:"container"},{default:n((()=>[l(m,{class:d([C.connectionClass,"connection-status"])},{default:n((()=>[c(i(C.connectionMessage),1)])),_:1},8,["class"]),l(O,{class:"form"},{default:n((()=>[l(k,{onClick:h.reconnect,class:"submit-button"},{default:n((()=>[c("连接")])),_:1},8,["onClick"]),l(m,{class:"form-group"},{default:n((()=>[l(m,null,{default:n((()=>[c("进度条:")])),_:1}),l(m,null,{default:n((()=>[c("LCD1:"+i(C.LCD1),1)])),_:1}),l(m,null,{default:n((()=>[c("LCD2:"+i(C.LCD2),1)])),_:1})])),_:1}),l(m,{class:"slider-label"},{default:n((()=>[c("前置时间: "+i(C.Endpoint_BeforeDelay),1)])),_:1}),l(y,{value:C.Endpoint_BeforeDelay,min:"0",max:"200",step:"1","show-value":"",activeColor:"#3cc51f",backgroundColor:"#e5e5e5","block-color":"#3cc51f","block-size":"28",onChange:e[0]||(e[0]=t=>h.onSliderChange("Endpoint_BeforeDelay",t))},null,8,["value"]),l(m,{class:"slider-label"},{default:n((()=>[c("间隔时间: "+i(C.Endpoint_delay),1)])),_:1}),l(y,{value:C.Endpoint_delay,min:"0",max:"200",step:"1","show-value":"",activeColor:"#3cc51f",backgroundColor:"#e5e5e5","block-color":"#3cc51f","block-size":"28",onChange:e[1]||(e[1]=t=>h.onSliderChange("Endpoint_delay",t))},null,8,["value"]),l(m,{class:"form-group"},{default:n((()=>[l(E,null,{default:n((()=>[c("选项选择:")])),_:1}),l(m,{class:"radio-group"},{default:n((()=>[l(k,{onClick:e[2]||(e[2]=t=>h.modeOption(0)),class:d(h.getModeClass(0))},{default:n((()=>[c("关闭")])),_:1},8,["class"]),l(k,{onClick:e[3]||(e[3]=t=>h.modeOption(1)),class:d(h.getModeClass(1))},{default:n((()=>[c("On-Q")])),_:1},8,["class"]),l(k,{onClick:e[4]||(e[4]=t=>h.modeOption(2)),class:d(h.getModeClass(2))},{default:n((()=>[c("On-Whel")])),_:1},8,["class"])])),_:1})])),_:1}),l(m,{class:"form-group"},{default:n((()=>[l(E,null,{default:n((()=>[c("选项选择:")])),_:1}),l(m,{class:"radio-group"},{default:n((()=>[l(k,{onClick:e[5]||(e[5]=t=>h.endPointOption(0)),class:d(h.getEndpointClass(0))},{default:n((()=>[c("Ste")])),_:1},8,["class"]),l(k,{onClick:e[6]||(e[6]=t=>h.endPointOption(1)),class:d(h.getEndpointClass(1))},{default:n((()=>[c("Dym")])),_:1},8,["class"]),l(k,{onClick:e[7]||(e[7]=t=>h.endPointOption(2)),class:d(h.getEndpointClass(2))},{default:n((()=>[c("Wde")])),_:1},8,["class"]),l(k,{onClick:e[8]||(e[8]=t=>h.endPointOption(3)),class:d(h.getEndpointClass(3))},{default:n((()=>[c("Ato")])),_:1},8,["class"]),l(k,{onClick:e[9]||(e[9]=t=>h.endPointOption(4)),class:d(h.getEndpointClass(4))},{default:n((()=>[c("Atw")])),_:1},8,["class"]),l(k,{onClick:e[10]||(e[10]=t=>h.endPointOption(5)),class:d(h.getEndpointClass(5))},{default:n((()=>[c("Man")])),_:1},8,["class"])])),_:1})])),_:1}),l(m,{class:"form-group"},{default:n((()=>[l(E,null,{default:n((()=>[c("BaseFunc:")])),_:1}),l(m,{class:"radio-group"},{default:n((()=>[l(k,{onClick:e[11]||(e[11]=t=>h.cmdFunc("setting_reset"))},{default:n((()=>[c("重置")])),_:1})])),_:1})])),_:1}),l(m,{class:"form-group"},{default:n((()=>[l(E,null,{default:n((()=>[c("PowerFunc:")])),_:1}),l(m,{class:"radio-group"},{default:n((()=>[l(k,{onClick:e[12]||(e[12]=t=>h.cmdFunc("reset"))},{default:n((()=>[c("重启")])),_:1}),l(k,{onClick:e[13]||(e[13]=t=>h.cmdFunc("cfg3k"))},{default:n((()=>[c("B300")])),_:1}),l(k,{onClick:e[14]||(e[14]=t=>h.cmdFunc("cfg115k"))},{default:n((()=>[c("B115")])),_:1}),l(k,{onClick:e[15]||(e[15]=t=>h.cmdFunc("cfg9k"))},{default:n((()=>[c("B9600")])),_:1}),l(k,{onClick:e[16]||(e[16]=t=>h.cmdFunc("cfgget"))},{default:n((()=>[c("获取CFG")])),_:1}),l(k,{onClick:e[17]||(e[17]=t=>h.cmdFunc("setusb"))},{default:n((()=>[c("设定USBstr")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-b0eea1ca"]]);export{g as default};
